!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r=u;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=_(a,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var l=s(t,e,n);if("normal"===l.type){if(r=n.done?d:f,l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=d,n.method="throw",n.arg=l.arg)}}}(t,n,a),i}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u="suspendedStart",f="suspendedYield",h="executing",d="completed",p={};function m(){}function y(){}function b(){}var g={};g[i]=function(){return this};var v=Object.getPrototypeOf,w=v&&v(v(N([])));w&&w!==n&&r.call(w,i)&&(g=w);var k=b.prototype=m.prototype=Object.create(g);function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t){var e;this._invoke=function(n,o){function i(){return new Promise((function(e,i){!function e(n,o,i,a){var c=s(t[n],t,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):Promise.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return e("throw",t,i,a)}))}a(c.arg)}(n,o,e,i)}))}return e=e?e.then(i,i):i()}}function _(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=s(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:A}}function A(){return{value:e,done:!0}}return y.prototype=k.constructor=b,b.constructor=y,b[c]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},S(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,r,o){var i=new E(l(e,n,r,o));return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(k),k[c]="Generator",k[i]=function(){return this},k.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";n.r(e);n(0);function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){var n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=void 0,(r="matcha")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.matcha=e}var e,n,i;return e=t,(n=[{key:"push",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];try{e.length>1?this.applyAsyncFunction(e):this.applyAsyncFunction.apply(this,e)}catch(t){this.matcha.logger.log("QueueManager: Error while applying function: ".concat(t)),e.length>1?this.logError(t,e):this.logError.apply(this,[t].concat(e))}}},{key:"applyAsyncFunction",value:function(t){if(void 0!==t){var e=r(t);this.matcha.logger.log("QueueManager: applyAsyncFunction with ".concat(e));var n,o=Array.prototype.shift.call(e),i=this.matcha.getComponent(o);if(this.matcha.logger.log("QueueManager: Running ".concat(o," with ").concat(e)),void 0===i)this.matcha.logger.log("QueueManager: Component ".concat(o," does not exist"));else if(e.length>=1)try{n=Array.prototype.shift.call(e),i.call.apply(i,[n].concat(r(e)))}catch(n){this.matcha.logger.log("QueueManager: Error attempting: ".concat(o," with ").concat(e)),this.matcha.logger.log(n),this.logError(n,t)}else this.matcha.logger.log("QueueManager: Error: optsArray is not long enough")}else this.matcha.logger.log("QueueManager: applyAsyncFunction called with nil arguments")}},{key:"logError",value:function(t,e){try{var n=encodeURIComponent(t),r=e?encodeURIComponent(e.join(",")):"";fetch("https://mjslg.getmatcha.com/m.png?err=".concat(n,"&client=").concat(this.matcha.client.token,"&args=").concat(r))}catch(t){this.matcha.logger.log("Error logging to S3: ".concat(t))}}}])&&o(e.prototype,n),i&&o(e,i),t}();function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l,s,u,f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"getCookie",value:function(t){for(var e="".concat(t,"="),n=decodeURIComponent(document.cookie).split(";"),r=0,o=n.length;r<o;r++){for(var i=n[r];i.startsWith(" ");)i=i.substring(1);if(i.startsWith(e))return i.substring(e.length,i.length)}return null}},{key:"setCookie",value:function(t,e){document.cookie="".concat(t,"=").concat(e)}}],(n=null)&&c(e.prototype,n),r&&c(e,r),t}();function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}u=function(t){return t?(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce((function(t,e){var n=a(e.split("="),2),r=n[0],o=n[1];return t[r]=o?decodeURIComponent(o.replace(/\+/g," ")):"",t}),{}):{}},(s="getQueryStringParams")in(l=f)?Object.defineProperty(l,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[s]=u;var p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"isDebugMode",void 0),d(this,"isDiagnosticMode",void 0);var n=f.getQueryStringParams(window.location.search);this.isDiagnosticMode="matcha_diagnostic"in n,this.isDebugMode=e||this.isDiagnosticMode||"matcha_debug"in n}var e,n,r;return e=t,(n=[{key:"log",value:function(){if(this.isDebugMode){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];[].concat(e).forEach((function(t){console.log("Matcha JS: ".concat(t))}))}}},{key:"alert",value:function(t){this.isDiagnosticMode&&window.alert("Matcha JS: ".concat(t))}}])&&h(e.prototype,n),r&&h(e,r),t}();function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"matcha",void 0),this.matcha=e}var e,n,r;return e=t,(n=[{key:"call",value:function(t){var e=Object.prototype.hasOwnProperty.call(this,t),n=Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(this),t);if(!e&&!n)throw new Error("'".concat(t,"' is not a property of the component"));var r=this[t];if("function"!=typeof r)throw new Error("'".concat(t,"' is not a function"));for(var o=r.bind(this),i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];o.apply(void 0,a)}}])&&m(e.prototype,n),r&&m(e,r),t}();function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function w(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){v(i,r,o,a,c,"next",t)}function c(t){v(i,r,o,a,c,"throw",t)}a(void 0)}))}}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,n=!(o=S(e).call(this,t))||"object"!==b(o)&&"function"!=typeof o?E(r):o,O(E(n),"isStartedUp",void 0),O(E(n),"removeExistingCanonicalTags",(function(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),document.querySelectorAll('link[rel="canonical"]').forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)}))})),O(E(n),"buildNewCanonicalTag",(function(t){var e=document.createElement("link");e.setAttribute("rel","canonical"),e.setAttribute("href",t),document.head.appendChild(e)})),n.isStartedUp=!1,n}var n,r,o,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,t),n=e,(r=[{key:"channelToken",value:function(t){this.matcha.channelToken||(this.matcha.channelToken=t,this.matcha.queue.push("track","startPageTracking"),this.matcha.queue.push("config","startup",t))}},{key:"globalChannelToken",value:function(t){this.channelToken(t)}},{key:"setCanonicalUrl",value:function(t){this.removeExistingCanonicalTags(),this.buildNewCanonicalTag(t)}},{key:"startup",value:(a=w(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isStartedUp){t.next=2;break}return t.abrupt("return");case 2:return this.isStartedUp=!0,t.next=5,this.requestStartupData(e);case 5:(n=t.sent)&&(n.client&&(this.matcha.client=n.client,this.matcha.logger.alert("successfully installed for ".concat(n.client.name,". Version: ").concat(this.matcha.version))),this.processStartupDate(n));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"requestStartupData",value:(i=w(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.matcha.logger.log("Requesting startup data from Avalanche API."),n="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname),t.next=5,fetch("https://app.getmatcha.com/avalanche/".concat(e,"?url=").concat(encodeURIComponent(n)),{credentials:"include"});case 5:if((r=t.sent).ok){t.next=9;break}throw this.processErrorResponse(r.status),new Error("GET request to Avalanche API failed.");case 9:return t.next=11,r.json();case 11:return o=t.sent,t.abrupt("return",o);case 15:return t.prev=15,t.t0=t.catch(0),this.matcha.logger.log("There has been a problem with requestStartupData: ".concat(t.t0.message)),t.abrupt("return",null);case 19:case"end":return t.stop()}}),t,this,[[0,15]])}))),function(t){return i.apply(this,arguments)})},{key:"processStartupDate",value:function(t){if(this.matcha.logger.log("Startup data received"),t.forms){var e=t.forms;e.knownForms&&this.matcha.queue.push("lead_form_tracking","setKnownForms",e.knownForms),e.supportedForms&&this.matcha.queue.push("lead_form_tracking","setSupportedForms",e.supportedForms)}if(t.calls)for(var n=t.calls,r=0;r<n.length;r+=1){var o;(o=this.matcha.queue).push.apply(o,g(n[r]))}}},{key:"processErrorResponse",value:function(t){t>=400&&t<500?this.matcha.logger.alert("Unsuccessfully installed - please check domain configuration. Version: ".concat(this.matcha.version)):t>=500&&t<600&&this.matcha.logger.alert("Unknown error encountered while diagnosing Matcha-JS - please contact support. Version: ".concat(this.matcha.version))}}])&&k(n.prototype,r),o&&k(n,o),e}(y);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var j=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,L(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,t),n=e,(r=[{key:"user",value:function(t,e,n){this.matcha.sp("trackSelfDescribingEvent",{schema:"iglu:com.rootsrated/identification/jsonschema/1-0-1",data:{provider:t,scope:e,value:n}})}}])&&N(n.prototype,r),o&&N(n,o),e}(y);function x(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var F=function(t){var e=function(t){var e;t.includes("://")?e=I(t.split("/"),3)[2]:e=I(t.split("/"),1)[0];var n=e.split(":"),r=(e=I(n,1)[0]).split("?");return e=I(r,1)[0]}(t),n=e.split("."),r=n.length;return r>2&&(e="".concat(n[r-2],".").concat(n[r-1]),2===n[r-1].length&&2===n[r-1].length&&(e="".concat(n[r-3],".").concat(e))),e},D=function(t){var e=t.type.toLowerCase();if("email"===e||"text"===e){return/^.+@.+$/.test(t.value.trim())}return!1},R=function(t){for(var e,n,r,o=["input"],i=o.length-1;i>=0;i-=1){e=o[i];for(var a=(n=t.getElementsByTagName(e)).length-1;a>=0;a-=1)if(r=n[a],D(r))return r.value.trim()}return null},M=function(t){return t.name&&"string"==typeof t.name?t.name:t.id&&"string"==typeof t.id?t.id:t.type&&"string"==typeof t.type?t.type:t.nodeName},q=function(t){return x(t.classList)},B=function(t){return btoa("".concat(window.location.hostname.toLowerCase()).concat(M(t),"/").concat(q(t).join("|")))};function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function X(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var z=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,n=!(o=V(e).call(this,t))||"object"!==G(o)&&"function"!=typeof o?X(r):o,W(X(n),"knownForms",void 0),W(X(n),"supportedIDs",void 0),W(X(n),"supportedClasses",void 0),W(X(n),"supportedActionRoots",void 0),W(X(n),"supportedNames",void 0),W(X(n),"initialized",void 0),n.knownForms={},n.supportedIDs={},n.supportedClasses={},n.supportedActionRoots={},n.supportedNames={},n.initialized=!1,n}var n,r,o,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(e,t),n=e,(r=[{key:"setKnownForms",value:function(t){this.knownForms=t||this.knownForms}},{key:"setSupportedForms",value:function(t){var e=t.ids,n=t.classes,r=t.actionRoots,o=t.names;this.supportedIDs=e||this.supportedIDs,this.supportedClasses=n||this.supportedClasses,this.supportedActionRoots=r||this.supportedActionRoots,this.supportedNames=o||this.supportedNames}},{key:"initialize",value:function(){var t=this;this.initialized||(this.initialized=!0,document.addEventListener("submit",(function(e){var n=e.target;t.identifyAndTrackForm(n)}),!0),document.addEventListener("click",(function(e){var n=e.target;if("BUTTON"===n.nodeName&&"privy-submit-btn"===n.id){var r=document.getElementsByClassName("privy-form")[0];r&&t.identifyAndTrackForm(r)}t.handleClickOptinMonster(n)}),!0),document.addEventListener("keydown",(function(e){var n=e.target;13===e.keyCode&&"INPUT"===n.nodeName&&t.handleKeyDownOptinMonster(n)}),!0))}},{key:"shouldTrackForm",value:function(t){return!Object.prototype.hasOwnProperty.call(this.knownForms,t)||this.knownForms[t]}},{key:"identifyAndTrackForm",value:function(t){var e=this.extractSupportedFormType(t);if(e){var n=B(t);this.shouldTrackForm(n)&&this.trackFormLead(n,t,e)}}},{key:"handleClickOptinMonster",value:function(t){if("BUTTON"===t.nodeName){var e=/^(.+)-FieldsElementButton/.exec(t.id);if(null!==e){var n=e[1],r=document.getElementById("".concat(n,"-field-email"));r&&this.trackSubmissionOptinMonster(r)}}}},{key:"handleKeyDownOptinMonster",value:function(t){null!==/^(.+)-field-email$/.exec(t.id)&&this.trackSubmissionOptinMonster(t)}},{key:"trackSubmissionOptinMonster",value:function(t){var e=function(t){var e=/^(.+)-field-email$/.exec(t.id);return null===e?null:e[1]?B(t):null}(t);if(e&&this.shouldTrackForm(e)){var n=t.value;n&&D(t)&&this.trackLeadGen(e,t,"optinmonster",n)}}},{key:"trackFormLead",value:function(t,e,n){var r=R(e);r&&this.trackLeadGen(t,e,n,r)}},{key:"trackLeadGen",value:function(t,e,n,r){this.sendFormDataToAPI(t,e,n,r),this.matcha.sp("trackSelfDescribingEvent",{schema:"iglu:com.rootsrated/conversion/jsonschema/1-0-1",data:{id:t,value:r,type:"email"}}),void 0!==window.fbq&&window.fbq("track","Subscribe")}},{key:"extractSupportedFormType",value:function(t){if("FORM"===t.nodeName){if(Object.prototype.hasOwnProperty.call(this.supportedIDs,t.id))return this.supportedIDs[t.id].type;if(t.action){var e=F(t.action);if(Object.prototype.hasOwnProperty.call(this.supportedActionRoots,e))return this.supportedActionRoots[e].type}if(t.name&&"string"==typeof t.name&&Object.prototype.hasOwnProperty.call(this.supportedNames,t.name))return this.supportedNames[t.name].type;var n=q(t);if(n.length){var r=(o=n,i=this.supportedClasses,(a=Object.entries(i).find((function(t){return o.includes(t[0])})))?a[1]:null);if(r)return r.type}}var o,i,a;return null}},{key:"sendFormDataToAPI",value:(i=regeneratorRuntime.mark((function t(e,n,r,o){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=JSON.stringify({subscriber:{email:o,subscribed_host:window.location.hostname,subscribed_path:window.location.pathname},conversion_form:{form_id:e,element_name:M(n),classes:q(n).join(" "),domain:window.location.hostname.toLowerCase(),form_type:r}}),t.prev=1,t.next=4,fetch("https://app.getmatcha.com/avalanche/".concat(this.matcha.channelToken,"/leads"),{method:"POST",body:i,credentials:"include",headers:{"Content-Type":"application/json"}});case 4:if((a=t.sent).ok){t.next=7;break}throw new Error("POST request to leads API failed.");case 7:return t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(1),this.matcha.logger.log("There has been an error sending form data: ".concat(t.t0)),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,this,[[1,10]])})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){U(o,n,r,a,c,"next",t)}function c(t){U(o,n,r,a,c,"throw",t)}a(void 0)}))},function(t,e,n,r){return a.apply(this,arguments)})}])&&H(n.prototype,r),o&&H(n,o),e}(y);function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),K(this,$(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(e,t),n=e,(r=[{key:"order",value:function(t,e,n,r){this.matcha.sp("trackSelfDescribingEvent",{schema:"iglu:com.rootsrated/shopify_order/jsonschema/1-0-2",data:{customer_id:e,created_at:n,order_id:r,shop_id:t}})}}])&&J(n.prototype,r),o&&J(n,o),e}(y);function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ot(t,e,n){return e&&rt(t.prototype,e),n&&rt(t,n),t}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var at=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),it(this,"hasChildBlockElement",(function(e){return nt(e.childNodes).some((function(e){return t.DIV_TO_P_ELEMS.includes(e.tagName)||n.hasChildBlockElement(e)}))})),it(this,"isPhrasingContent",(function(e){var r=e,o=r.nodeType,i=r.tagName;return o===t.TEXT_NODE||t.PHRASING_ELEMS.includes(i)||("A"===i||"DEL"===i||"INS"===i)&&nt(e.childNodes).every(n.isPhrasingContent)})),!e||!e.documentElement)throw new Error("First argument to ContentFinder constructor should be a document object.");this.doc=e,this.articleByline="",this.articleDir="",this.attempts=[],this.nbTopCandidates=r.nbTopCandidates||t.DEFAULT_N_TOP_CANDIDATES,this.charThreshold=r.charThreshold||t.DEFAULT_CHAR_THRESHOLD,this.flags=t.FLAG_STRIP_UNLIKELYS|t.FLAG_WEIGHT_CLASSES|t.FLAG_CLEAN_CONDITIONALLY}return ot(t,null,[{key:"getNext",value:function(e){return t.getNextNode(e,!0)}},{key:"getNextNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e&&t.firstElementChild)return t.firstElementChild;if(t.nextElementSibling)return t.nextElementSibling;for(;t&&!t.nextElementSibling;)t=t.parentNode;return t&&t.nextElementSibling}},{key:"getNodeAncestors",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,r=[];t.parentNode&&(r.push(t.parentNode),!e||++n!==e);)t=t.parentNode;return r}},{key:"isElementWithoutContent",value:function(e){return e.nodeType===t.ELEMENT_NODE&&0===(e.textContent||"").trim().length&&(0===e.children.length||e.children.length===e.getElementsByTagName("br").length+e.getElementsByTagName("hr").length)}},{key:"getInnerText",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(e.textContent||"").trim();return n?r.replace(t.REGEXPS.normalize," "):r}},{key:"hasAncestorTag",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3?arguments[3]:void 0;e=e.toUpperCase();for(var o=0;t.parentNode;){if(n>0&&o>n)return!1;if(t.parentNode.tagName===e&&(!r||r(t.parentNode)))return!0;t=t.parentNode,o++}return!1}},{key:"hasSingleTagInsideElement",value:function(e,n){return 1===e.children.length&&e.children[0].tagName===n&&!nt(e.childNodes).some((function(e){return e.nodeType===t.TEXT_NODE&&t.REGEXPS.hasContent.test(e.textContent||"")}))}},{key:"getLinkDensity",value:function(e){var n=t.getInnerText(e).length;if(0===n)return 0;var r=0;return nt(e.getElementsByTagName("a")).forEach((function(e){r+=t.getInnerText(e).length})),r/n}},{key:"isValidByline",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t=t.trim()).length>0&&t.length<100}},{key:"isProbablyVisible",value:function(t){return!(t.style&&"none"===t.style.display||t.hasAttribute("hidden")||t.hasAttribute("aria-hidden")&&"true"===t.getAttribute("aria-hidden"))}},{key:"isWhitespace",value:function(e){return e.nodeType===t.TEXT_NODE&&0===(e.textContent||"").trim().length||e.nodeType===t.ELEMENT_NODE&&"BR"===e.tagName}},{key:"setNodeTag",value:function(t,e){if("__JSDOMParser__"in t)return Object.defineProperties(t,{localName:{value:e.toLowerCase(),writable:!0},tagName:{value:e.toUpperCase(),writable:!0}}),t;for(var n=t.ownerDocument.createElement(e);t.firstChild;)n.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(n,t),"readability"in t&&(n.readability=t.readability);for(var r=0;r<t.attributes.length;r++)try{n.setAttribute(t.attributes[r].name,t.attributes[r].value)}catch(t){}return n}}]),ot(t,[{key:"initializeNode",value:function(t){switch(Object.defineProperty(t,"readability",{value:{contentScore:0},writable:!0}),t.tagName){case"DIV":t.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":t.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":t.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":t.readability.contentScore-=5}t.readability.contentScore+=this.getClassWeight(t)}},{key:"checkByline",value:function(e,n){if(this.articleByline)return!1;var r,o;void 0!==e.getAttribute&&(r=e.getAttribute("rel"),o=e.getAttribute("itemprop"));var i=e.textContent||"";return!(!("author"===r||o&&o.includes("author")||t.REGEXPS.byline.test(n))||!t.isValidByline(i))&&(this.articleByline=i,!0)}},{key:"getClassWeight",value:function(e){if(!this.flagIsActive(t.FLAG_WEIGHT_CLASSES))return 0;var n=0;return"string"==typeof e.className&&""!==e.className&&(t.REGEXPS.negative.test(e.className)&&(n-=25),t.REGEXPS.positive.test(e.className)&&(n+=25)),"string"==typeof e.id&&""!==e.id&&(t.REGEXPS.negative.test(e.id)&&(n-=25),t.REGEXPS.positive.test(e.id)&&(n+=25)),n}},{key:"flagIsActive",value:function(t){return(this.flags&t)>0}},{key:"removeFlag",value:function(t){this.flags=this.flags&~t}},{key:"grabArticle",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.doc.body,r=null!==n;if(!n)return null;for(var o=n.innerHTML,i=function(){for(var i=e.flagIsActive(t.FLAG_STRIP_UNLIKELYS),a=[],c=n;c;){var l="".concat(c.className," ").concat(c.id).toLowerCase();if(t.isProbablyVisible(c))if(e.checkByline(c,l))c=t.getNext(c);else if(!i||!t.REGEXPS.unlikelyCandidates.test(l)||t.REGEXPS.okMaybeItsACandidate.test(l)||t.hasAncestorTag(c,"table")||"BODY"===c.tagName||"A"===c.tagName)if(["DIV","SECTION","HEADER","H1","H2","H3","H4","H5","H6"].includes(c.tagName)&&t.isElementWithoutContent(c))c=t.getNext(c);else{t.DEFAULT_TAGS_TO_SCORE.includes(c.tagName)&&a.push(c);var s=c.cloneNode(!0);if("DIV"===s.tagName){for(var u=null,f=s.firstChild;f;){var h=f.nextSibling;if(e.isPhrasingContent(f))null!==u?u.appendChild(f):t.isWhitespace(f)||(u=e.doc.createElement("p"),s.replaceChild(u,f),u.appendChild(f));else if(null!==u){for(;u.lastChild&&t.isWhitespace(u.lastChild);)u.removeChild(u.lastChild);u=null}f=h}t.hasSingleTagInsideElement(s,"P")&&t.getLinkDensity(s)<.25?a.push(s):e.hasChildBlockElement(s)||(t.setNodeTag(s,"P"),a.push(s))}c=t.getNextNode(c)}else c=t.getNext(c);else c=t.getNext(c)}var d=[];[].concat(a).forEach((function(n){if(n.parentNode&&void 0!==n.parentNode.tagName){var r=t.getInnerText(n);if(!(r.length<25)){var o=t.getNodeAncestors(n,1);if(0!==o.length){var i=0;i+=1,i+=r.split(",").length,i+=Math.min(Math.floor(r.length/100),3),nt(o).forEach((function(t,n){var r;t.tagName&&t.parentNode&&void 0!==t.parentNode.tagName&&(void 0===t.readability&&(e.initializeNode(t),d.push(t)),r=0===n?1:1===n?2:3*n,t.readability.contentScore+=i/r)}))}}}}));for(var p=[],m=0,y=d.length;m<y;m+=1){var b=d[m],g=b.readability.contentScore*(1-t.getLinkDensity(b));b.readability.contentScore=g;for(var v=0;v<e.nbTopCandidates;v++){var w=p[v];if(!w||g>w.readability.contentScore){p.splice(v,0,b),p.length>e.nbTopCandidates&&p.pop();break}}}var k=p[0]||null,S=!1,E=void 0;if(null===k||"BODY"===k.tagName){k=e.doc.createElement("DIV"),S=!0;for(var _=n.childNodes;_.length;)k.appendChild(_[0]);n.appendChild(k),e.initializeNode(k)}else if(k){for(var O=[],T=1;T<p.length;T++)p[T].readability.contentScore/k.readability.contentScore>=.75&&O.push(t.getNodeAncestors(p[T]));if(O.length>=3)for(E=k.parentNode;"BODY"!==E.tagName;){for(var C=0,N=0;N<O.length&&C<3;N++)C+=Number(O[N].includes(E));if(C>=3){k=E;break}E=E.parentNode}k.readability||e.initializeNode(k),E=k.parentNode;for(var A=k.readability.contentScore,L=A/3;"BODY"!==E.tagName;)if(E.readability){var P=E.readability.contentScore;if(P<L)break;if(P>A){k=E;break}A=E.readability.contentScore,E=E.parentNode}else E=E.parentNode;for(E=k.parentNode;"BODY"!==E.tagName&&1===E.children.length;)E=(k=E).parentNode;k.readability||e.initializeNode(k)}var j=e.doc.createElement("DIV");r&&(j.id="readability-content");for(var x=Math.max(10,.2*k.readability.contentScore),I=(E=k.parentNode).children,F=0,D=I.length;F<D;F++){var R=I[F],M=!1;if(R===k)M=!0;else{var q=0;if(R.className===k.className&&""!==k.className&&(q+=.2*k.readability.contentScore),R.readability&&R.readability.contentScore+q>=x)M=!0;else if("P"===R.nodeName){var B=t.getLinkDensity(R),G=t.getInnerText(R),U=G.length;U>80&&B<.25?M=!0:U<80&&U>0&&0===B&&-1!==G.search(/\.( |$)/)&&(M=!0)}}if(M){if(!t.ALTER_TO_DIV_EXCEPTIONS.includes(R.nodeName)){var H=R.cloneNode(!0);H=t.setNodeTag(H,"DIV")}j.appendChild(R),F-=1,D-=1}}if(S)k.id="readability-page-1",k.className="page";else{var V=e.doc.createElement("DIV");V.id="readability-page-1",V.className="page";for(var X=j.childNodes;X.length;)V.appendChild(X[0]);j.appendChild(V)}var Y=!0,W=t.getInnerText(j,!0).length;if(W<e.charThreshold)if(Y=!1,n.innerHTML=o,e.flagIsActive(t.FLAG_STRIP_UNLIKELYS))e.removeFlag(t.FLAG_STRIP_UNLIKELYS),e.attempts.push({articleContent:j,textLength:W});else if(e.flagIsActive(t.FLAG_WEIGHT_CLASSES))e.removeFlag(t.FLAG_WEIGHT_CLASSES),e.attempts.push({articleContent:j,textLength:W});else if(e.flagIsActive(t.FLAG_CLEAN_CONDITIONALLY))e.removeFlag(t.FLAG_CLEAN_CONDITIONALLY),e.attempts.push({articleContent:j,textLength:W});else{if(e.attempts.push({articleContent:j,textLength:W}),e.attempts.sort((function(t,e){return e.textLength-t.textLength})),!e.attempts[0].textLength)return{v:null};j=e.attempts[0].articleContent,Y=!0}if(Y){var z=[E,k].concat(nt(t.getNodeAncestors(E)));return nt(z).some((function(t){if(!t.tagName)return!1;var n=t.getAttribute("dir");return!!n&&(e.articleDir=n,!0)})),{v:k}}};;){var a=i();if("object"===et(a))return a.v}}}]),t}();it(at,"FLAG_STRIP_UNLIKELYS",1),it(at,"FLAG_WEIGHT_CLASSES",2),it(at,"FLAG_CLEAN_CONDITIONALLY",4),it(at,"ELEMENT_NODE",1),it(at,"TEXT_NODE",3),it(at,"DEFAULT_MAX_ELEMS_TO_PARSE",0),it(at,"DEFAULT_N_TOP_CANDIDATES",5),it(at,"DEFAULT_TAGS_TO_SCORE",["SECTION","H2","H3","H4","H5","H6","P","TD","PRE"]),it(at,"DEFAULT_CHAR_THRESHOLD",500),it(at,"REGEXPS",{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|carousel|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shopify|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e-?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^|]|$)|»([^|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,whitespace:/^\s*$/,hasContent:/\S$/}),it(at,"DIV_TO_P_ELEMS",["A","BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL","SELECT"]),it(at,"PHRASING_ELEMS",["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"]),it(at,"ALTER_TO_DIV_EXCEPTIONS",["DIV","ARTICLE","SECTION","P"]);var ct=at,lt=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return new Promise((function(n){setTimeout((function(){return n(e.apply(void 0,r))}),t)}))};function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ft(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ht(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(t){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gt=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=pt(e).call(this,t),n=!o||"object"!==st(o)&&"function"!=typeof o?mt(r):o,bt(mt(n),"handleFormClose",(function(){n.content.removeChild(n.subscriberForm)})),bt(mt(n),"handleFormInput",(function(t){var e=t.currentTarget;n.inputNeedsReset&&(e.setCustomValidity(""),n.inputNeedsReset=!1),n.setInputValidity(e)})),bt(mt(n),"handleFormSubmit",function(){var t,r=(t=regeneratorRuntime.mark((function t(r){var o,i,a,c,l,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,o=r.currentTarget,i=B(o),a=R(o)||"",c=n.emailInput,l=JSON.stringify({subscriber:{email:a,subscribed_host:window.location.hostname,subscribed_path:window.location.pathname},conversion_form:{form_id:i,element_name:M(o),classes:q(o).join(" "),domain:window.location.hostname.toLowerCase(),form_type:"matcha"}}),t.next=9,fetch("https://app.getmatcha.com/avalanche/".concat(n.matcha.channelToken,"/leads"),{method:"POST",body:l,credentials:"include",headers:{"Content-Type":"application/json"}});case 9:(s=t.sent).ok?(n.successBehavior(),n.trackEvents(i,a)):401===s.status?(n.inputNeedsReset=!0,n.setInputValidity(c,"Please enter a valid email")):n.timedOut?n.timedOut&&(n.successBehavior(),n.trackEvents(i,a),u=new Error(s.statusText),e.handleError(u)):(n.handleFormSubmit(r),n.timedOut=!0),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),e.handleError(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ht(i,r,o,a,c,"next",t)}function c(t){ht(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}()),bt(mt(n),"setInputValidity",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e&&t.setCustomValidity(e);var n=t.checkValidity(),r=t.parentElement;n?r.classList.remove("subscriber-form-matcha__input--invalid"):(t.reportValidity(),r.classList.add("subscriber-form-matcha__input--invalid"))})),bt(mt(n),"showContent",(function(){lt(500,(function(){n.subscriberForm.style.minHeight="100%",n.content.style.opacity="1.0"}))})),bt(mt(n),"successBehavior",(function(){var t=n.subscriberForm,e=t.getAttribute("data-matcha-form-type"),r=t.querySelector(".subscriber-form-matcha__title");r&&(r.textContent="Thanks!");var o=t.querySelector(".subscriber-form-matcha__form-wrapper");if(o&&o.parentNode.removeChild(o),"subscriber"===e){var i=t.querySelector(".subscriber-form-matcha__subtitle");i&&(i.textContent="You're subscribed!")}else{var a=t.querySelector(".subscriber-form-matcha__icon");a&&(a.classList.remove("subscriber-form-matcha__icon--locked"),a.classList.add("subscriber-form-matcha__icon--unlocked")),n.updateCountdown(3)}})),bt(mt(n),"trackEvents",(function(t,e){n.matcha.sp("trackSelfDescribingEvent",{schema:"iglu:com.rootsrated/conversion/jsonschema/1-0-1",data:{id:t,value:e,type:"email"}}),void 0!==window.fbq&&window.fbq("track","Subscribe")})),n.inputNeedsReset=!1,n.content=null,n.subscriberForm=null,n.timedOut=!1,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(e,t),n=e,o=[{key:"shouldShowForm",value:function(){var t=f.getCookie("matcha_is_unlocked"),e=f.getQueryStringParams(window.location.search);return(!t||"false"===t)&&"unlocked"!==e.utm_content}},{key:"handleError",value:function(t){throw t}},{key:"wrappedContent",value:function(){for(var t=document.querySelector(".mtc-article-body-06f21fc66");null!==t&&1===t.childElementCount;)t=t.firstElementChild;return t}}],(r=[{key:"setContent",value:function(){var t=document.cloneNode(!0);if(this.content=e.wrappedContent(),!this.content){var n=new ct(t).grabArticle(void 0);if(n){for(var r=ft(document.querySelectorAll("*")),o=this.getInnerContainer(n),i=0,a=r.length;i<a;i++)if(r[i].isEqualNode(o)){this.content=r[i];break}}else this.content=document.body,this.matcha.logger.log("Failed to find article contents. Defaulting to `document.body` for subscriber form.");this.content||(this.content=document.body,this.matcha.logger.log("Failed article contents comparison. Defaulting to `document.body` for subscriber form."))}}},{key:"getInnerContainer",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.content,e=t;e&&e.children&&1===e.children.length;)e=this.getInnerContainer(e.firstElementChild);return e}},{key:"updateCountdown",value:function(t){var e=this,n=this.subscriberForm,r=n.querySelector(".subscriber-form-matcha__subtitle");if(r&&(r.textContent="Unlocking in ".concat(t,"...")),0===t){n.style.opacity="0.0";var o=this.content;o.style.maxHeight="",o.style.overflow="",o.addEventListener("transitionend",this.handleFormClose),f.setCookie("matcha_is_unlocked","true")}else lt(1e3,(function(){return e.updateCountdown(--t)}))}},{key:"addSubscriberForm",value:function(t,e){var n=this.content;return this.createFormElement(e,"subscriber"),null!==this.subscriberForm&&(t>=n.childElementCount?n.appendChild(this.subscriberForm):0===t?n.insertBefore(this.subscriberForm,n.firstElementChild):n.insertBefore(this.subscriberForm,n.children[t]),!0)}},{key:"createFormElement",value:function(t,e){this.subscriberForm=document.createElement("div");var n=this.subscriberForm;n.id="subscriber-form_".concat(this.matcha.channelToken),n.className="subscriber-form-matcha-wrapper",n.innerHTML=t,n.setAttribute("data-matcha-form-type",e);var r=n.querySelector(".subscriber-form-matcha__form");if(!r)return this.matcha.logger.log("Failed to find form element within subscriber form."),!1;r.addEventListener("submit",this.handleFormSubmit),this.emailInput=n.querySelector(".subscriber-form-matcha__input--email");var o=this.emailInput;return o?(o.addEventListener("input",this.handleFormInput),!0):(this.matcha.logger.log("Failed to find email input element within subscriber form"),!1)}},{key:"addLockedForm",value:function(t,e){var n=this.content;n.style.position="relative";var r=0;if(t>0){var o=n.children[t-1];o||(this.matcha.logger.log("Failed to find element at position"),o=ut(n.children,1)[0]);var i=o.getBoundingClientRect(),a=i.height,c=i.top,l=n.getBoundingClientRect().top,s=window.getComputedStyle(o);r=c+a+parseFloat(s.marginBottom||"")-l}if(this.createFormElement(e,"locked"),null===this.subscriberForm)return!1;n.appendChild(this.subscriberForm);var u=document.createElement("style");u.appendChild(document.createTextNode("")),document.head.appendChild(u);var f=u.sheet;return f.insertRule("#subscriber-form_".concat(this.matcha.channelToken," { position: absolute; top: ").concat(r,"px; left: 0; z-index: 1; width: 100%; overflow: hidden; background: rgba(255, 255, 255, 0.8333) linear-gradient(rgba(255, 255, 255, 0) calc(100% - 14px), white); transition: opacity 0.2s }"),0),f.insertRule("@supports ((-webkit-backdrop-filter: blur(2em)) or (backdrop-filter: blur(2em))) { #subscriber-form_".concat(this.matcha.channelToken," { backdrop-filter: blur(7px); -webkit-backdrop-filter: blur(7px); } }"),1),!CSS.supports("backdrop-filter","2em")&&!CSS.supports("-webkit-backdrop-filter","2em")&&(f.insertRule(".compass-distribution-wrapper > * { filter: blur(3px); }",1),f.insertRule(".compass-distribution-wrapper #subscriber-form_".concat(this.matcha.channelToken," { filter: blur(0); }"),1),t>0)&&f.insertRule("".concat(ft(Array(t+1)).map((function(t,e){return".compass-distribution-wrapper > *:nth-child(".concat(e,")")})).join(", ")," { filter: blur(0); }"),1),n.style.opacity="0.0",n.style.overflow="hidden",n.style.transition="opacity 0.2s, max-height 0.2s",!0}},{key:"add_form",value:function(t,n,r){return!!e.shouldShowForm()&&(this.setContent(),"locked"===t?this.addLockedForm(n,r):this.addSubscriberForm(n,r),this.showContent(),!0)}}])&&dt(n.prototype,r),o&&dt(n,o),e}(z);function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _t=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=wt(e).call(this,t),n=!o||"object"!==vt(o)&&"function"!=typeof o?kt(r):o,Et(kt(n),"loadInstagramEmbed",(function(){if("loading"!==document.readyState){if(document.querySelectorAll("blockquote.instagram-media").length>0){var t=document.createElement("script");t.src="//www.instagram.com/embed.js",t.async=!0,t.defer=!0,document.body.appendChild(t)}}else window.addEventListener("DOMContentLoaded",(function(){n.loadInstagramEmbed()}))})),Et(kt(n),"loadOptinMonsterPixel",(function(){if("loading"!==document.readyState){var t=document.createElement("script");t.type="text/javascript",t.src="//a.opmnstr.com/app/js/api.min.js",t.async=!0,t.setAttribute("data-account","64860"),t.setAttribute("data-user","57531"),document.body.appendChild(t)}else window.addEventListener("DOMContentLoaded",(function(){n.loadOptinMonsterPixel()}))})),Et(kt(n),"loadFacebookPixel",(function(t){if("loading"!==document.readyState){var e=document.createElement("script");e.innerHTML="!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');fbq('init', '".concat(t,"');fbq('track','PageView');"),document.body.appendChild(e)}else window.addEventListener("DOMContentLoaded",(function(){n.loadFacebookPixel(t)}))})),n.loadInstagramEmbed(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(e,t),e}(y);function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ct(t){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function At(t,e){return(At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pt=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=Ct(e).call(this,t),n=!o||"object"!==Ot(o)&&"function"!=typeof o?Nt(r):o,Lt(Nt(n),"isTrackingStarted",void 0),Lt(Nt(n),"checkIfTrackingStarted",(function(){n.isTrackingStarted||n.matcha.channelToken||(n.matcha.logger.log("Matcha installation is incomplete; please define a channel token."),n.matcha.logger.alert("Matcha installation is incomplete; please define a channel token."))})),n.isTrackingStarted=!1,setTimeout(n.checkIfTrackingStarted,3e4),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(e,t),n=e,(r=[{key:"startPageTracking",value:function(){this.isTrackingStarted||this.matcha.channelToken&&(this.matcha.sp("newTracker","rravalanche-clj","avalanche.rootsrated.com",{appId:this.matcha.channelToken,discoverRootDomain:!0,respectDoNotTrack:!1,forceSecureTracker:!0,post:!0}),this.isTrackingStarted=!0,this.matcha.sp("enableActivityTracking",10,10),this.matcha.sp("enableLinkClickTracking"),this.matcha.sp("refreshLinkClickTracking"),this.trackPageView())}},{key:"trackPageView",value:function(){this.matcha.sp("trackPageView")}}])&&Tt(n.prototype,r),o&&Tt(n,o),e}(y);function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function It(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function Ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dt(t){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mt(t,e){return(Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Bt=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=Dt(e).call(this,t),n=!o||"object"!==jt(o)&&"function"!=typeof o?Rt(r):o,qt(Rt(n),"handleFormClose",(function(){n.content.removeChild(n.lockedForm)})),qt(Rt(n),"handleFormInput",(function(t){var e=t.currentTarget;n.inputNeedsReset&&(e.setCustomValidity(""),n.inputNeedsReset=!1),n.setInputValidity(e)})),qt(Rt(n),"handleFormSubmit",function(){var t,r=(t=regeneratorRuntime.mark((function t(r){var o,i,a,c,l,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,o=r.currentTarget,i=B(o),a=R(o)||"",c=n.emailInput,l=JSON.stringify({subscriber:{email:a,subscribed_host:window.location.hostname,subscribed_path:window.location.pathname},conversion_form:{form_id:i,element_name:M(o),classes:q(o).join(" "),domain:window.location.hostname.toLowerCase(),form_type:"matcha"}}),t.next=9,fetch("https://app.getmatcha.com/avalanche/".concat(n.matcha.channelToken,"/leads"),{method:"POST",body:l,credentials:"include",headers:{"Content-Type":"application/json"}});case 9:(s=t.sent).ok?(n.showThanks(),n.trackEvents(i,a)):401===s.status?(n.inputNeedsReset=!0,n.setInputValidity(c,"Please enter a valid email")):n.timedOut?n.timedOut&&(n.showThanks(),n.trackEvents(i,a),u=new Error(s.statusText),e.handleError(u)):(n.handleFormSubmit(r),n.timedOut=!0),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),e.handleError(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){It(i,r,o,a,c,"next",t)}function c(t){It(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}()),qt(Rt(n),"setInputValidity",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e&&t.setCustomValidity(e);var n=t.checkValidity(),r=t.parentElement;n?r.classList.remove("locked-form-matcha__input--invalid"):(t.reportValidity(),r.classList.add("locked-form-matcha__input--invalid"))})),qt(Rt(n),"showContent",(function(){lt(500,(function(){n.lockedForm.style.minHeight="100%",n.content.style.opacity="1.0"}))})),qt(Rt(n),"showThanks",(function(){var t=n.lockedForm,e=t.querySelector(".locked-form-matcha__icon");e&&(e.classList.remove("locked-form-matcha__icon--locked"),e.classList.add("locked-form-matcha__icon--unlocked"));var r=t.querySelector(".locked-form-matcha__title");r&&(r.textContent="Thanks!");var o=t.querySelector(".locked-form-matcha__form-wrapper");o&&o.parentNode.removeChild(o),n.updateCountdown(3)})),qt(Rt(n),"trackEvents",(function(t,e){n.matcha.sp("trackSelfDescribingEvent",{schema:"iglu:com.rootsrated/conversion/jsonschema/1-0-1",data:{id:t,value:e,type:"email"}}),void 0!==window.fbq&&window.fbq("track","Subscribe")})),n.isLocked=!0,n.inputNeedsReset=!1,n.content=null,n.lockedForm=null,n.timedOut=!1,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mt(t,e)}(e,t),n=e,o=[{key:"handleError",value:function(t){throw t}},{key:"getCookie",value:function(t){for(var e="".concat(t,"="),n=decodeURIComponent(document.cookie).split(";"),r=0,o=n.length;r<o;r++){for(var i=n[r];i.startsWith(" ");)i=i.substring(1);if(i.startsWith(e))return i.substring(e.length,i.length)}return null}},{key:"setCookie",value:function(t,e){document.cookie="".concat(t,"=").concat(e)}}],(r=[{key:"setContent",value:function(){var t=document.cloneNode(!0),e=new ct(t).grabArticle(void 0);if(e){for(var n=xt(document.querySelectorAll("*")),r=this.getInnerContainer(e),o=0,i=n.length;o<i;o++)if(n[o].isEqualNode(r)){this.content=n[o];break}}else this.content=document.body,this.matcha.logger.log("Failed to find article contents. Defaulting to `document.body` for locked content.");this.content||(this.content=document.body,this.matcha.logger.log("Failed article contents comparison. Defaulting to `document.body` for locked content."))}},{key:"getInnerContainer",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.content,e=t;e&&e.children&&1===e.children.length;)e=this.getInnerContainer(e.firstElementChild);return e}},{key:"setLock",value:function(){var t=e.getCookie("matcha_is_unlocked"),n=f.getQueryStringParams(window.location.search);this.isLocked=(!t||"false"===t)&&"unlocked"!==n.utm_content}},{key:"updateCountdown",value:function(t){var n=this,r=this.lockedForm,o=r.querySelector(".locked-form-matcha__subtitle");if(o&&(o.textContent="Unlocking in ".concat(t,"...")),0===t){r.style.opacity="0.0";var i=this.content;i.style.maxHeight="",i.style.overflow="";var a=document.createElement("style");document.head.appendChild(a),a.sheet.insertRule(".compass-distribution-wrapper > * { filter: blur(0); }",0),i.addEventListener("transitionend",this.handleFormClose),e.setCookie("matcha_is_unlocked","true")}else lt(1e3,(function(){return n.updateCountdown(--t)}))}},{key:"lock",value:function(t){if(this.setLock(),this.isLocked){this.setContent();var e=this.content;e.style.position="relative";for(var n,r=0,o=0;o<e.children.length;o++){var i=e.children[o];if((r+=(i.textContent||"").trim().split(/\s+/).length)>=80)break;n=i}var a=0;if(n){var c=n.getBoundingClientRect(),l=c.height,s=c.top,u=e.getBoundingClientRect().top,f=window.getComputedStyle(n);a=s+l+parseFloat(f.marginBottom||"")-u}this.lockedForm=document.createElement("div");var h=this.lockedForm;h.id="locked-form_".concat(this.matcha.channelToken),h.innerHTML=t;var d=h.querySelector(".locked-form-matcha__form");if(!d)return this.matcha.logger.log("Failed to find form element within locked form."),!1;d.addEventListener("submit",this.handleFormSubmit),this.emailInput=h.querySelector(".locked-form-matcha__input--email");var p=this.emailInput;if(!p)return this.matcha.logger.log("Failed to find email input element within locked form"),!1;p.addEventListener("input",this.handleFormInput),e.appendChild(this.lockedForm);var m=document.createElement("style");m.appendChild(document.createTextNode("")),document.head.appendChild(m);var y=m.sheet;return y.insertRule("#locked-form_".concat(this.matcha.channelToken," { position: absolute; top: ").concat(a,"px; left: 0; z-index: 1; width: 100%; overflow: hidden; background: rgba(255, 255, 255, 0.8333) linear-gradient(rgba(255, 255, 255, 0) calc(100% - 14px), white); transition: opacity 0.2s }"),0),y.insertRule("@supports ((--webkit-backdrop-filter: blur(2em)) or (backdrop-filter: blur(2em))) { #locked-form_".concat(this.matcha.channelToken," { backdrop-filter: blur(7px); --webkit-backdrop-filter: blur(7px); } }"),1),CSS.supports("backdrop-filter","2em")||CSS.supports("--webkit-backdrop-filter","2em")||(y.insertRule(".compass-distribution-wrapper > * { filter: blur(3px); }",2),y.insertRule(".compass-distribution-wrapper > *:first-child, .compass-distribution-wrapper > *:nth-child(2), .compass-distribution-wrapper #locked-form_".concat(this.matcha.channelToken," { filter: blur(0); }"),3)),e.style.opacity="0.0",e.style.overflow="hidden",e.style.transition="opacity 0.2s, max-height 0.2s",this.showContent(),!0}return!1}}])&&Ft(n.prototype,r),o&&Ft(n,o),e}(z);function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t,e){return(Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zt=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=Vt(e).call(this,t),n=!o||"object"!==Gt(o)&&"function"!=typeof o?Xt(r):o,Wt(Xt(n),"handleSelectImageChange",(function(t){var e=t.target.closest(".matcha-shopify-product__item");if(e){var n=(e.querySelector(".matcha-shopify-product__select")||{}).value;if(n){var r=JSON.parse(n.replace(/'/g,'"')).image_src,o=e.querySelector(".matcha-shopify-product__hero");o&&r&&(o.src=r)}}})),Wt(Xt(n),"handleViewProduct",(function(t){var r=t.target.closest(".matcha-shopify-product__item"),o=e.getShopifyDomain();if(r){var i=(r.querySelector('[name="matcha_shopify_product"]')||{}).value;if(i){var a=JSON.parse(i.replace(/'/g,'"')),c=a.handle,l=a.shopify_id;c&&l?window.open("".concat(o,"/products/").concat(c,"?variant=").concat(l),"_blank"):n.matcha.logger.log("`ProductList.handleViewProduct` could not find product handle or Shopify id.")}else n.matcha.logger.log("`ProductList.handleViewProduct` could not find product field.")}else n.matcha.logger.log("`ProductList.handleViewProduct` could not find parent form.")})),Wt(Xt(n),"handleThumbnailClick",(function(t){var e=t.target,n=e.closest(".matcha-shopify-product__gallery");if(n){var r=n.querySelector(".matcha-shopify-product__hero");r&&(r.src=e.src,r.alt=e.alt)}})),Wt(Xt(n),"handleSubmit",(function(t){t.preventDefault();var e=t.target,r=e.elements,o=e.querySelector('.matcha-shopify-product__button[type="submit"]'),i=e.querySelector(".matcha-shopify-product__progress"),a=r.matcha_shopify_product.value,c=JSON.parse(a.replace(/'/g,'"')).shopify_id;if(o&&(e.classList.add("matcha-shopify-product--loading"),o.disabled=!0),i&&(i.textContent=""),c){var l=JSON.stringify({items:[{quantity:1,id:c}]});fetch("/cart/add.js",{method:"POST",body:l,headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error("POST request to Shopify shop failed.");o.textContent="Added to cart!",e.classList.remove("matcha-shopify-product--loading"),e.classList.add("matcha-shopify-product--loaded"),i&&(i.textContent="View cart")})).catch((function(t){o.textContent="Add to cart",e.classList.remove("matcha-shopify-product--loading"),e.classList.remove("matcha-shopify-product--loaded"),n.matcha.logger.log("`ProductList.handleSubmit` error caught while adding to card:",t),i&&(i.textContent="An error occurred. Please retry.")}))}})),n.content=null,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yt(t,e)}(e,t),n=e,o=[{key:"getShopifyDomain",value:function(){var t=document.querySelectorAll("[data-shopify-domain].matcha-shopify-product");if(0===t.length)return"";var e=t[0].dataset.shopifyDomain;return void 0===e?"":"https://".concat(e)}}],(r=[{key:"insert",value:function(t,e){var n=this;this.setContent();var r=this.content,o=document.createElement("div");if(o.className="matcha-shopify",o.innerHTML=e,o.addEventListener("submit",this.handleSubmit),Ut(o.querySelectorAll(".matcha-shopify-product__thumbnail")).forEach((function(t){t.addEventListener("click",n.handleThumbnailClick)})),Ut(o.querySelectorAll(".matcha-shopify-product__view")).forEach((function(t){t.addEventListener("click",n.handleViewProduct)})),Ut(o.querySelectorAll(".matcha-shopify-product__select")).forEach((function(t){t.addEventListener("change",n.handleSelectImageChange)})),"middle"===t){var i=this.getMidElement();if(i){for(var a=i;a&&/^H[1-6]$/.test(a.tagName)&&a.previousElementSibling;)a=a.previousElementSibling;return a&&a.nextElementSibling?(r.insertBefore(o,a.nextElementSibling),!0):(r.appendChild(o),!0)}}return"end"===t&&(r.appendChild(o),!0)}},{key:"setContent",value:function(){var t=document.cloneNode(!0),e=new ct(t).grabArticle(void 0);if(e){for(var n=Ut(document.querySelectorAll("*")),r=this.getInnerContainer(e),o=0,i=n.length;o<i;o++)if(n[o].isEqualNode(r)){this.content=n[o];break}}else this.content=document.body,this.matcha.logger.log("`ProductList.setContent` failed to find article contents. Defaulting to `document.body`.");this.content||(this.content=document.body,this.matcha.logger.log("`ProductList.setContent` failed article contents comparison. Defaulting to `document.body`."))}},{key:"getInnerContainer",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.content,e=t;e&&e.children&&1===e.children.length;)e=this.getInnerContainer(e.firstElementChild);return e}},{key:"getMidElement",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.content,e=t,n=e.getBoundingClientRect(),r=n.height,o=n.top,i=r/2,a=1/0,c=e,l=0,s=e.children.length;l<s;l+=1){var u=e.children[l],f=u.getBoundingClientRect(),h=f.height,d=f.top,p=d-o+h,m=Math.abs(p-i);m<a&&(a=m,c=u)}return c}}])&&Ht(n.prototype,r),o&&Ht(n,o),e}(y);function Qt(t){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kt(t,e){return!e||"object"!==Qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var te=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Kt(this,$t(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(e,t),n=e,(r=[{key:"add",value:function(t){var e=this;if("loading"!==document.readyState){var n=document.createElement("div");n.id="mtc-social-share-buttons",n.innerHTML=t,document.body.appendChild(n)}else window.addEventListener("DOMContentLoaded",(function(){e.add(t)}))}}])&&Jt(n.prototype,r),o&&Jt(n,o),e}(y);function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var re,oe,ie=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ne(this,"version",void 0),ne(this,"queueName",void 0),ne(this,"logger",void 0),ne(this,"queue",void 0),ne(this,"components",void 0),ne(this,"sp",void 0),ne(this,"channelToken",void 0),ne(this,"client",void 0),ne(this,"initSnowplow",(function(){return function(t,e,n,r,o,i,a){t[o]||(t.GlobalSnowplowNamespace=t.GlobalSnowplowNamespace||[],t.GlobalSnowplowNamespace.push(o),t[o]=function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].q=t[o].q||[],i=e.createElement(n),a=e.getElementsByTagName(n)[0],i.async=1,i.src="//cdn.jsdelivr.net/gh/snowplow/sp-js-assets@2.10.2/sp.js",a.parentNode.insertBefore(i,a))}(window,document,"script",0,"matchaAvalanche"),window.matchaAvalanche})),this.version="v".concat("1.0.27"),this.queueName=n,this.channelToken=null,this.client={name:null,token:null},this.logger=new p,this.logger.log("Initializing Matcha JS ".concat(this.version)),this.logger.log("Loading Snowplow JS code"),this.sp=this.initSnowplow(),this.components={config:new T(this),identify:new j(this),lead_form_tracking:new z(this),locked_content:new Bt(this),product_list:new zt(this),shopify:new tt(this),subscriber_form:new gt(this),third_party_snippet:new _t(this),track:new Pt(this),social_share_buttons:new te(this)},this.queue=new i(this),this.logger.log("Matcha: Applying ".concat(e.length," items from initialQueue"));for(var r=0;r<e.length;r+=1)this.queue.push(e[r])}var e,n,r;return e=t,(n=[{key:"getComponent",value:function(t){return this.components[t]}}])&&ee(e.prototype,n),r&&ee(e,r),t}(),ae=window.rr;window.matcha||(window.matcha=window.rr);try{ae.q=(re=ae.q,(oe=new ie(re,"matcha")).logger.log("Overwriting default queue"),oe.queue)}catch(t){fetch("https://mjslg.getmatcha.com/m.png?err=".concat(encodeURIComponent(t),"&args=initial_load"))}}]);